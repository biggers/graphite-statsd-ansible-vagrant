- name: update apt package cache
  apt: update_cache=yes
  when: ansible_os_family == "Debian"

- name: Display all variables/facts known for a host
  debug: var=hostvars[inventory_hostname]
#  "ansible_distribution": "CentOS",                                       
#  "ansible_distribution_major_version": "7",                              

- name: get epel-repo rpm RHEL7
  get_url: dest=/tmp/epel-release.rpm  url=http://mirrors.mit.edu/epel/7/x86_64/e/epel-release-7-2.noarch.rpm
  when: ansible_os_family == 'RedHat' and ansible_distribution_major_version|int == 7

- name: get epel-repo rpm RHEL6
  get_url: dest=/tmp/epel-release.rpm  url=http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm
  when: ansible_os_family == 'RedHat' and ansible_distribution_major_version|int == 6

- name: install epel-repo rpm
  yum: pkg=/tmp/epel-release.rpm state=installed
  when: ansible_os_family == 'RedHat'

- name: install common packages debian/ubuntu
  apt: pkg={{ item }} state=latest
  with_items:
    - build-essential
    - git
  when: ansible_os_family == "Debian"

# @development is a groupinstall, see https://coderwall.com/p/k6goya
- name: install common packages redhat/centos
  yum: pkg={{ item }} state=latest
  with_items:
    - '@development'
    - git
  when: ansible_os_family == "RedHat"

